!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.carouselss=e()}}(function(){var _defi_,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["jquery","./lib/mod","./lib/get-max-animation-duration","./lib/get-max-transition-duration-from-change"],function($){return factory($)})}else if(typeof exports==="object"){module.exports=factory(typeof window!=="undefined"?window["$"]:typeof global!=="undefined"?global["$"]:null,_dereq_("./lib/mod"),_dereq_("./lib/get-max-animation-duration"),_dereq_("./lib/get-max-transition-duration-from-change"))}else{var $=root.$||root.jQuery||{};$.carouselss=factory($,root.mod,root.getMaxAnimationDuration,root.getMaxTransitionDurationFromChange)}})(this,function($,mod,getMaxAnimationDuration,getMaxTransitionDurationFromChange){"use strict";var pluginName="carouselss";var defaults={interval:3e3,startIndex:0,thumbnail:".carousel-thumbnail",stage:".carousel-stage",stageFrameClass:"carousel-frame",move:null};function Carousel(carousel_element,options){this._defaults=defaults;this._name=pluginName;this.opts=$.extend({},defaults,options);this.currentPosition=undefined;var $carouselElement=$(carousel_element);var $carouselStage=$carouselElement.find(this.opts.stage);var $thumbnailElements=$carouselElement.find(this.opts.thumbnail);var carouselInterval;var currentFrame=null;var animationEndEventString="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd";var transitionEndEventString="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";var frameDelayCache={};var currentBindings=[];function bind(element,selector,cb){if(element.length>0){element.on(selector,cb);currentBindings.push({element:element,selector:selector,callback:cb})}}this.init=function(){var self=this;this.startInterval();bind($carouselElement,"mouseover",function(){self.stopInterval()});bind($carouselElement,"mouseleave",function(){self.startInterval()});$thumbnailElements=$carouselElement.find(this.opts.thumbnail);bind($thumbnailElements,"click keydown",function(e){if(e.type==="click"||e.type==="keydown"&&(e.keyCode===32||e.keyCode===13)){self.move($(this).index());self.startInterval();e.preventDefault()}});frameDelayCache={}};this.destroy=function(){this.currentPosition=null;this.removeFrame(currentFrame,-1);this.stopInterval();for(var i=0;i<currentBindings.length;i++){var binding=currentBindings[i];binding.element.off(binding.selector,binding.callback)}};this.startInterval=function(){var self=this;this.stopInterval();if(this.opts.interval>0){carouselInterval=setInterval(function(){self.next()},this.opts.interval)}};this.stopInterval=function(){clearInterval(carouselInterval)};this.next=function(){this.move(this.currentPosition+1)};this.prev=function(){this.move(this.currentPosition-1)};this.move=function(index){if(this.currentPosition!=index&&$thumbnailElements.length>0){index=mod(index,$thumbnailElements.length);var $thumbnail=$($thumbnailElements[index]);$thumbnailElements.each(function(){$(this).removeClass("is-active")});$thumbnail.addClass("is-active");this.removeFrame(currentFrame,this.currentPosition);var newFrameContents=$thumbnail.contents().clone();newFrameContents.wrapAll('<div class="'+this.opts.stageFrameClass+'" data-position="'+index+'"></div>');newFrameContents=newFrameContents.parent();currentFrame=newFrameContents.prependTo($carouselStage);this.currentPosition=index;if(this.opts.move){this.opts.move(jQuery.Event("move"))}$carouselElement.trigger(pluginName+"move",jQuery.Event("move"))}};this.removeFrame=function(frame,frameIndex){if(frame){var maxTransitionOrAnimationTime=frameDelayCache[frameIndex];if(!maxTransitionOrAnimationTime){var frameTransitionTime=getMaxTransitionDurationFromChange(frame,function(){frame.addClass("is-deprecated")});var frameAnimationTime=getMaxAnimationDuration(frame);frameDelayCache[frameIndex]=frameAnimationTime>frameTransitionTime?frameAnimationTime:frameTransitionTime;maxTransitionOrAnimationTime=frameDelayCache[frameIndex]}else{frame.addClass("is-deprecated")}var isCurrentFrameRemoved=false;var removeCurrentFrame=function(){if(!isCurrentFrameRemoved){frame.remove()}isCurrentFrameRemoved=true};if(!maxTransitionOrAnimationTime){removeCurrentFrame()}else{frame.one(animationEndEventString+" "+transitionEndEventString,function(){removeCurrentFrame()});setTimeout(function(){removeCurrentFrame()},(maxTransitionOrAnimationTime+.017)*1e3)}}};this.destroy();this.init();this.move(this.opts.startIndex||0)}$.fn[pluginName]=function(options){return this.each(function(){var $this=$(this);var carousel=new Carousel(this,options);triggerBind($this,carousel,pluginName+"instance",function(cb){cb(carousel)})});function triggerBind($element,pluginInstance,eventName,method){$element.bind(eventName,function(){method.apply(pluginInstance,Array.prototype.slice.call(arguments,1))})}};$.fn[pluginName].defaults=defaults;return Carousel})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./lib/get-max-animation-duration":7,"./lib/get-max-transition-duration-from-change":8,"./lib/mod":9}],2:[function(_dereq_,module,exports){(function(global){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["jquery"],function($){return factory($)})}else if(typeof exports==="object"){module.exports=factory(typeof window!=="undefined"?window["$"]:typeof global!=="undefined"?global["$"]:null)}else{var $=root.$||root.jQuery||{};root.checkForPropertyChange=factory($)}})(this,function($){"use strict";function checkForPropertyChange(property,before,after){before=before||{};after=after||{};var hasSomethingChanged=false;if(property==="all"){var propertyKeys=Object.keys(before);for(var propIndex=0;propIndex<propertyKeys.length;propIndex++){var key=propertyKeys[propIndex];if(before[key]!=after[key]){hasSomethingChanged=true;break}}}else{hasSomethingChanged=$("<div></div>").css(before).css(property)!=$("<div></div>").css(after).css(property)}return hasSomethingChanged}return checkForPropertyChange})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],3:[function(_dereq_,module,exports){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.cssTimeValueToSeconds=factory()}})(this,function(){"use strict";function cssTimeValueToSeconds(cssTimeValue){var matches=(cssTimeValue||"").match(/(\d*?\.?\d*?)(s|ms)/i);var timeValue=parseFloat(matches[1],10)*(matches[2]==="ms"?.001:1);return timeValue}return cssTimeValueToSeconds})},{}],4:[function(_dereq_,module,exports){(function(global){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["jquery"],factory)}else if(typeof exports==="object"){module.exports=factory(typeof window!=="undefined"?window["$"]:typeof global!=="undefined"?global["$"]:null)}else{root.css=factory(root.$)}})(this,function($){"use strict";function css(element){var sheets=document.styleSheets,associatedStyles={};for(var i in sheets){var rules=[];try{rules=sheets[i].rules||sheets[i].cssRules}catch(err){console.log("CarouselSS: unable to read styles",err)}for(var r in rules){try{if(element.is(rules[r].selectorText)){associatedStyles=$.extend(associatedStyles,css2json(rules[r].style),css2json(element.attr("style")))}}catch(e){}}}return associatedStyles}function css2json(css){var s={},CSSStyleDeclaration=window.CSSStyleDeclaration||false;if(css){if(CSSStyleDeclaration&&css instanceof CSSStyleDeclaration){for(var i=0;i<css.length;i++){if(css[i].toLowerCase){s[css[i].toLowerCase()]=css[css[i]]}}}else if(typeof css==="string"){var declarations=css.split(/;\s?/);for(var declaration in declarations){var l=css[declaration].split(/:\s?/);s[l[0].toLowerCase()]=l[1]}}}return s}return css})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(_dereq_,module,exports){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.getCSSKeyframeList=factory()}})(this,function(){"use strict";function getCSSKeyframeList(){var keyframeList={},CSSKeyframesRule=window.CSSKeyframesRule||false;for(var stylesheetIndex=0;stylesheetIndex<document.styleSheets.length;stylesheetIndex++){var stylesheet=document.styleSheets[stylesheetIndex];var rules=stylesheet.cssRules||stylesheet.rules;if(rules){for(var i=0;i<rules.length;i++){var rule=rules[i];if(CSSKeyframesRule&&rule instanceof CSSKeyframesRule){keyframeList[rule.name]=true}}}}return keyframeList}return getCSSKeyframeList})},{}],6:[function(_dereq_,module,exports){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["./css-time-value-to-seconds"],factory)}else if(typeof exports==="object"){module.exports=factory(_dereq_("./css-time-value-to-seconds"))}else{root.getDurationInfo=factory(root.cssTimeValueToSeconds)}})(this,function(cssTimeValueToSeconds){"use strict";function getDurationInfo(nameString,durationString,delayString){var durationMap={},maxDurationKey=false,maxDurationValue=false;if(nameString&&durationString){var names=(nameString||"").split(/,\s*/);var durations=(durationString||"").split(/,\s*/);var delays=(delayString||"").split(/,\s*/);for(var i=0;i<names.length;i++){var name=names[i];var duration=durations[i];var delay=delays[i];var durationValue=cssTimeValueToSeconds(duration);var delayValue=cssTimeValueToSeconds(delay);var timeTotal=delayValue+durationValue;if(durationValue&&durationValue>0){durationMap[name]=timeTotal}if(durationValue>0&&timeTotal>maxDurationValue){maxDurationKey=name;maxDurationValue=timeTotal}}}return{maxKey:maxDurationKey,map:durationMap}}return getDurationInfo})},{"./css-time-value-to-seconds":3}],7:[function(_dereq_,module,exports){(function(global){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["jquery","./get-css-keyframe-list","./get-duration-info"],factory)}else if(typeof exports==="object"){module.exports=factory(typeof window!=="undefined"?window["$"]:typeof global!=="undefined"?global["$"]:null,_dereq_("./get-css-keyframe-list"),_dereq_("./get-duration-info"))}else{root.getMaxAnimationDuration=factory(root.$,root.getCSSKeyframeList,root.getDurationInfo)}})(this,function($,getCSSKeyframeList,getDurationInfo){"use strict";function getMaxAnimationDuration(element){element=$(element);var nameString=element.css("animation-name")||undefined;if(nameString&&nameString!="none"){var cssKeyframeList=getCSSKeyframeList();var durationInfo=getDurationInfo(element.css("animation-name"),element.css("animation-duration"));var currentValidatedLongestDuration=false;var names=nameString.split(/,\s*/);for(var i=0;i<names.length;i++){var name=names[i];var keyframesExist=cssKeyframeList[name];if(keyframesExist){var duration=durationInfo.map[name];if(duration>currentValidatedLongestDuration){currentValidatedLongestDuration=duration}}}return currentValidatedLongestDuration}return false}return getMaxAnimationDuration})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./get-css-keyframe-list":5,"./get-duration-info":6}],8:[function(_dereq_,module,exports){(function(global){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(["jquery","./css","./get-duration-info","./check-for-property-change"],factory)}else if(typeof exports==="object"){module.exports=factory(typeof window!=="undefined"?window["$"]:typeof global!=="undefined"?global["$"]:null,_dereq_("./css"),_dereq_("./get-duration-info"),_dereq_("./check-for-property-change"))}else{root.getMaxTransitionDurationFromChange=factory(root.$,root.css,root.getDurationInfo,root.checkForPropertyChange)}})(this,function($,css,getDurationInfo,checkForPropertyChange){"use strict";function getMaxTransitionDurationFromChange(element,changeFunc){element=$(element);var currentLongestDuration=false;var durationInfo=getDurationInfo(element.css("transition-property"),element.css("transition-duration"),element.css("transition-delay"));if(durationInfo){var beforeDeprecatedCSS=css(element);changeFunc();var afterDeprecatedCSS=css(element);var transitionProperties=(element.css("transition-property")||"").split(/,\s*/);for(var i=0;i<transitionProperties.length;i++){var property=transitionProperties[i];var hasPropertyChanged=checkForPropertyChange(property,beforeDeprecatedCSS,afterDeprecatedCSS);if(hasPropertyChanged){var duration=durationInfo.map[property];if(duration>currentLongestDuration){currentLongestDuration=duration}}}}else{changeFunc()}return currentLongestDuration}return getMaxTransitionDurationFromChange})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./check-for-property-change":2,"./css":4,"./get-duration-info":6}],9:[function(_dereq_,module,exports){(function(root,factory){if(typeof _defi_==="function"&&_defi_.amd){_defi_(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.mod=factory()}})(this,function(){"use strict";function mod(x,m){return(x%m+m)%m}return mod})},{}]},{},[1])(1)});
